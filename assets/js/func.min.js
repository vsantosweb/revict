function __TASK(e,t,a,n,o,i=null){var s=new XMLHttpRequest,r="/mecanicashow/app/?task="+n+"&_action="+e;switch(e){case"add":$("#search").modal("hide"),s.onreadystatechange=function(){$(a).attr("data-target","#add");$("#add_m").html(this.responseText);__TASK.validate_task=function(t){if(1==t){var a="/mecanicashow/app/?task="+n+"&_action=save&method="+e+"&"+o+"="+i,r=$("#add_m form").serialize();s.open("POST",a,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(r),$(".btn-act").attr("disabled",!0),setTimeout(function(){location.reload()},1500)}}},s.open("POST",r,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send("&"+e+"="+t+"&"+o+"="+i);break;case"alter":s.onreadystatechange=function(){$(a).attr("data-target","#alter");$("#alter_m").html(this.responseText);__TASK.validate_task=function(t){if(1==t){var a="/mecanicashow/app/?task="+n+"&_action=save&method="+e+"&"+o+"="+i,r=$("#alter_m form").serialize();s.open("POST",a,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(r),$(".btn-act").attr("disabled",!0),setTimeout(function(){location.reload()},1500)}}},s.open("POST",r,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send("&"+e+"="+t+"&"+o+"="+i);break;case"del":s.onreadystatechange=function(){$("#del_m").html(this.responseText)},$(a).attr("data-target","#del"),__TASK.validate_task=function(a){if(1==a){var o="/mecanicashow/app/?task="+n+"&_action="+e;$(".btn-act").attr("disabled",!0),setTimeout(function(){location.reload()},1500),s.open("POST",o,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send("&"+e+"="+t)}};break;case"search":s.onreadystatechange=function(){__TASK.validate_task=function(e){if(1==e){var t="/mecanicashow/app/?task="+n+"&_action=query_search",a=$("#search_m form").serialize();s.open("POST",t,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(a),$(".btn-act").attr("disabled",!0),setTimeout(function(){$(".btn-act").attr("disabled",!1)},500)}}},s.open("POST",r,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send("&"+e+"="+t+"&"+o+"="+i)}}function create_budget(e){xhttp.onreadystatechange=function(){},xhttp.open("POST","?task=servico&_action=query_search",!0),xhttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),xhttp.send(string)}$(function(){$(".notify_container").hide(),$("#form_login").submit(function(e){var t=$(this).serialize();$("button[type=submit]").attr("disabled",!0).html("Conectando..."),$.ajax({method:"POST",data:t,url:"/mecanicashow/app/?task=login&_action=auth_validation",success:function(e){setTimeout(function(){$("button[type=submit]").attr("disabled",!1).html("Acessar"),$("#form_login").find("input").val(""),1==e?window.location="http://"+location.hostname+"/mecanicashow/app/":$("#form_login").find(".helper-text").css("color","red").html(e)},1200)}}),e.preventDefault()}),$("#form_add_cliente").submit(function(e){var t=$(this).serialize();$.ajax({method:"POST",data:t,url:"/mecanicashow/app/?task=cliente&_action=save&method=create",success:function(e){if($(".notify_container").fadeIn(),$("#form_add_cliente").find("input").val(""),!e)return!1;$(".notify_container").html(e),setTimeout(function(){$(".notify_container").fadeOut()},2e3)}}),e.preventDefault()}),$("#form_add_peca").submit(function(e){var t=$(this).serialize();$.ajax({method:"POST",data:t,url:"/mecanicashow/app/?task=estoque&_action=save&method=create",success:function(e){return $(".notify_container").fadeIn(),$("#form_add_peca").find("input").val(""),!!e&&($(".notify_container").html(e),!0)}}),e.preventDefault()}),$("#form_alter_cliente").submit(function(e){var t=$(this).serialize();$.ajax({method:"POST",data:t,url:"/mecanicashow/app/?task=cliente&_action=save&method=alter",success:function(e){if($(".notify_container").fadeIn(),$("#form_alter_cliente").find("input").val(""),e)return $(".notify_container").html(e),!0;console.log("err")}}),e.preventDefault()}),$(".toggle_nav").click(function(e){$(".vs_sidebar").toggleClass("show"),$("body").css({overflow:"hidden"})}),$(".vs_sidebar .nav-item .nav-link").click(function(){$(".vs_sidebar .nav-item .nav-link").removeClass("active"),$(this).addClass("active")})});var budget=function(e){var t=new XMLHttpRequest;$(e).attr("data-target","#search");$("#search_m");budget.checkout=function(e){var a=$(e).serialize();t.onreadystatechange=function(){4==this.readyState&&200==this.status&&(0==this.responseText?($("#search_m").html("Usuário não cadastrado, cadastre-o para continuar!"),setTimeout(function(){location.reload()},1500)):this.responseText&&($("#search").modal("hide"),budget.open(this.responseText)))},t.open("POST","?task=servico&_action=query_search",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send(a)},budget.open=function(e){$("#orcamento_form").modal("show"),$("#orcamento_m").html(e);$(e).serialize()},budget.send=function(e){var a=$("#orcamento_m form").serialize();t.onreadystatechange=function(){4==this.readyState&&200==this.status&&($("#orcamento_m").html('<h4 class="text-center">Ordem enviada para apuração<h4>'),$(".modal-footer").html(""),setTimeout(function(){location.reload()},600))},t.open("POST","?task=servico&_action=create_orcamento"),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send(a)},this.action=function(){alert("oi")}};budget.start=function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){4==this.readyState&&200==this.status&&location.reload()},t.open("POST","?task=servico&_action=service_start",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send("&id="+e)},budget.remove=function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){4==this.readyState&&200==this.status&&budget.confirma(this.responseText)},t.open("POST","?task=servico&_action=service_remove",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send("&id="+e+"&resp=0"),budget.confirma=function(a){$("#del").modal("show"),__TASK.validate_task=function(a){1==a&&(t.onreadystatechange=function(){4==this.readyState&&200==this.status&&location.reload()},t.open("POST","?task=servico&_action=service_remove",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send("&id="+e+"&resp=1"))}}},budget.cancel=function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){4==this.readyState&&200==this.status&&budget.confirma(this.responseText)},t.open("POST","?task=servico&_action=service_cancel",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send("&id="+e+"&resp=0"),budget.confirma=function(a){$("#del").modal("show");$(".modal-header").html("Cancelamento de Serviço"),$(".btn-act").html("Sim"),$("#del_m").html('<h4 class="text-center">Deseja cancelar este serviço?<h4>'),__TASK.validate_task=function(a){1==a&&(t.onreadystatechange=function(){4==this.readyState&&200==this.status&&location.reload()},t.open("POST","?task=servico&_action=service_cancel",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send("&id="+e+"&resp=1"))}}},budget.finish=function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){4==this.readyState&&200==this.status&&budget.confirma(this.responseText)},t.open("POST","?task=servico&_action=service_finish",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send("&id="+e+"&resp=0"),budget.confirma=function(a){$("#del").modal("show");$(".modal-header").html("Finalizar Serviço"),$(".btn-act").html("Sim"),$("#del_m").html('<h4 class="text-center">Deseja concluir este serviço?<h4>'),__TASK.validate_task=function(a){1==a&&(t.onreadystatechange=function(){4==this.readyState&&200==this.status&&location.reload()},t.open("POST","?task=servico&_action=service_finish",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send("&id="+e+"&resp=1"))}}},budget.closure=function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){4==this.readyState&&200==this.status&&budget.confirma(this.responseText)},t.open("POST","?task=servico&_action=service_closure",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send("&id="+e+"&resp=0"),budget.confirma=function(a){var n=$(a).serialize();$("#del").modal("show");$(".modal-dialog").addClass("modal-lg"),$(".modal-header").html("<h5>Registrar Pagamento</h5>"),$(".btn-act").html("Enviar Pgto"),$("#del_m").html(a),__TASK.validate_task=function(a){1==a&&(t.onreadystatechange=function(){$(".btn-act").attr("disabled","true"),$(".btn-act").html("Registrando..."),4==this.readyState&&200==this.status&&($("#del_m").html("Aguarde..."),setTimeout(function(){location.reload()},1500))},t.open("POST","?task=servico&_action=service_closure",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send("&id="+e+"&resp=1&"+n))}}};